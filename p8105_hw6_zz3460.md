p8105_hw6_zz3460
================
Zihan Zhou
2025-11-17

## Problem 1

Set seed and load key packages.

``` r
set.seed(2025)

library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.6.0
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.2.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(broom)
library(purrr)
library(readr)
```

Read in data and clean.

``` r
h <- read_csv("data/homicide-data.csv")
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
h_clean <- h %>%
  mutate(
    city_state = paste(city, state, sep = ", "),
    solved = if_else(disposition %in% c("Closed with arrest", "Closed with arrest (exonerated)" , "Closed by arrest" , "Closed (No arrest)", "Closed with arrest"), TRUE, FALSE)
  )


# remove Dallas, Phoenix, Kansas City, remove Tulsa, AL
h_clean <- h_clean %>%
  filter(!city_state %in% c("Dallas, TX", "Phoenix, AZ", "Kansas City, MO", "Tulsa, AL"))


# limit victim_race to be white or black
h_clean <- h_clean %>%
  filter(tolower(victim_race) %in% c("white", "black"))


# make sure victim_age to be numeric
h_clean <- h_clean %>% mutate(victim_age = as.numeric(victim_age))
```

    ## Warning: There was 1 warning in `mutate()`.
    ## ℹ In argument: `victim_age = as.numeric(victim_age)`.
    ## Caused by warning:
    ## ! NAs introduced by coercion
